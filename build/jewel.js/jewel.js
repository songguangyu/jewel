var Jewel=function(e){var n=function(e){return new n.prototype.init(e)};n.prototype={constructor:n,init:function(e){this.ready(e)},ready:function(n){e.addEventListener("DOMContentLoaded",function(){n&&n()})}},n.prototype.init.prototype=n.prototype,n.moudle=function(e){return this.init(e),e},n.base={empty:function(e){var n=!0;for(var t in e)n=!1;return n}},n.init=function(e){function t(n){for(var o=0;o<n.length;o++)1===n[o].nodeType&&(n[o].getAttribute("moudle")===e.id?r(n[o].childNodes):t(n[o]))}function o(e,t){var o=/^ms-/;if(n.base.empty(e))return!1;for(var r in e)e.hasOwnProperty(r)&&o.test(e[r].name)&&t.push(e[r]);return 0===t.length?!1:t}function r(t){if(1===t.length&&3===t[0].nodeType)n.replaceInnerHtml(t[0],e);else for(var i=t.length,a=[],d=0;i>d;d++)3===t[d].nodeType?n.replaceInnerHtml(t[d],e):1===t[d].nodeType&&(a=o(t[d].attributes,a))?(n.handleAttribute(t[d],a,e),r(t[d].childNodes)):r(t[d].childNodes)}e.id?(t(document.body.children),this.binding(e)):console.log("请定义moudle ID")},n.replaceInnerHtml=function(e,n){var t=/((?:.|\n)*){{(.*)?}}(.*)/,o=e.nodeValue;if(t.test(o)){var r=null,i=middleWord=lastWord="",a=o.replace(t,function(e,t,o,a){return i=t,middleWord=o,lastWord=a,r=o,t+n[o]+a});e.nodeValue=a,document.addEventListener(n.id+r,function(n){e.nodeValue=i+n.eventType+lastWord})}},n.binding=function(e){Object.observe(e,function(n){n.forEach(function(t,o){var r=n[o].name,i=document.createEvent("HTMLEvents");i.eventType=n[o].object[r],i.initEvent(e.id+n[o].name,!1,!1),document.dispatchEvent(i)})})},n.handleAttribute=function(e,t,o){t.forEach(function(t,r){switch(t.name){case"ms-repeat":n.attr.repeat(t,e,o)}})},n.attr={repeat:function(e,t,o,r){var i=/{{(.*)}}/,a=null;e.value.match(i)?a=e.value.match(i)[1]:console.log("指令错误"),!r&&(r=t.parentNode),r.innerHTML="",document.addEventListener(a,function(t){n.attr.repeat(e,r,o,r)}),Array.isArray(o[a])?o[a].forEach(function(t,i){var d=e.ownerElement.nodeName,c=document.createElement(d),u=document.createTextNode("{{"+i+"}}");c.appendChild(u),n.replaceInnerHtml(c.childNodes[0],o[a]),r.appendChild(c)}):console.log("repeat指令 必须要配合数组 其他的不行")}};var t=n;return e.$=t,n}(window);